<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Hangar - Faith Based Pilot</title>
  <style>
    :root {
      --bg: #111;
      --ink: #fff;
      --bgL: #fff;
      --inkL: #000;
      --border: rgba(255, 255, 255, .12);
      --borderL: rgba(0, 0, 0, .12);
    }

    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background: var(--bg);
      color: var(--ink);
    }
    body.light {
      background: var(--bgL);
      color: var(--inkL);
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.5rem;
      background-color: #1a1a1a;
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      z-index: 999;
    }
    body.light header {
      background-color: #f0f0f0;
      border-color: var(--borderL);
    }

    nav {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    nav a {
      color: inherit;
      text-decoration: none;
      font-weight: bold;
      font-size: 0.95rem;
    }

    #themeToggle {
      width: 32px;
      height: 32px;
      cursor: pointer;
      filter: invert(1);
    }
    body.light #themeToggle {
      filter: invert(0);
    }

    h1 {
      text-align: center;
      margin-top: 2rem;
    }

    .subheader {
      text-align: center;
      font-size: 1.05rem;
      max-width: 800px;
      margin: 0.5rem auto 2rem;
      color: var(--ink);
    }
    body.light .subheader {
      color: #000;
    }

    .filters {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin: 1rem auto 2rem;
    }
    .filters button {
      background: none;
      border: 1px solid currentColor;
      padding: 8px 14px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      font-size: 0.9rem;
    }

    .filters .active {
      background: currentColor;
      color: var(--bg);
    }

    .grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1.25rem;
      padding: 0 1.5rem 2rem;
    }
    .card {
      width: 280px;
      padding: 1rem;
      border-radius: 10px;
      box-sizing: border-box;
      color: white;
      cursor: pointer;
    }
    .card[data-topic='Faith'] { background: #4da3ff; }
    .card[data-topic='Culture'] { background: #ff5e5e; }
    .card[data-topic='Men'] { background: #9c59d1; }
    .card[data-topic='Spiritual'] { background: #28b485; }
    .card[data-topic='Reflection'] { background: #f39c12; }

    body.light .card {
      color: white !important;
    }

    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      color: #fff;
      display: none;
      justify-content: center;
      align-items: center;
      padding: 2rem;
      z-index: 1000;
    }
    .modal-content {
      background: #222;
      max-width: 600px;
      width: 100%;
      padding: 2rem;
      border-radius: 12px;
      position: relative;
    }
    .modal button.close {
      position: absolute;
      top: 12px;
      right: 12px;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #fff;
      cursor: pointer;
    }
    .modal button.audio {
      margin-top: 1rem;
      background: #444;
      border: none;
      color: white;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
    }

    footer {
      text-align: center;
      font-size: 0.8rem;
      color: gray;
      padding: 2rem 1rem;
    }
  </style>
</head>
<body class="dark">

  <header>
    <nav>
      <a href="fbp.html">Home</a>
      <a href="beliefs.html">Beliefs</a>
      <a href="logbook.html">Logbook</a>
      <a href="thehangar.html">The Hangar</a>
      <a href="https://faithbasedpilot.net" target="_blank">Videos</a>
    </nav>
    <div style="display:flex; align-items:center; gap:1rem;">
      <img src="images/clickme.png" alt="Click Me" height="32"/>
      <img id="themeToggle" src="images/theme-toggle-logo.png" alt="Toggle Theme"/>
    </div>
  </header>

  <h1>The Hangar</h1>
  <div class="subheader">
    The Hangar is a runway for faith-filled thought â€” where devotion, courage, and truth are grounded before they soar. Click a title card to read!
  </div>

  <div class="filters">
    <button data-topic="Faith">Faith</button>
    <button data-topic="Culture">Culture</button>
    <button data-topic="Men">Menâ€™s Leadership</button>
    <button data-topic="Spiritual">Spiritual Warfare</button>
    <button data-topic="Reflection">Reflection</button>
    <button id="groupToggle">Group by Topic</button>
  </div>

  <div class="grid" id="postGrid">
    <!-- JS will populate cards -->
  </div>

  <div class="modal" id="modal">
    <div class="modal-content">
      <button class="close">&times;</button>
      <div id="modalText"></div>
      <button class="audio" onclick="speakContent()">ðŸ”Š Read Aloud</button>
    </div>
  </div>

  <footer>
    <p>&copy; 2025 Faith Based Pilot</p>
  </footer>

  <script>
    const body = document.body;
    const toggle = document.getElementById('themeToggle');
    const modal = document.getElementById('modal');
    const modalText = document.getElementById('modalText');
    const closeModal = modal.querySelector('.close');
    const groupToggle = document.getElementById('groupToggle');
    let showingGroup = false;

    const posts = [
      { title: "Men: Stand Firm", content: "Men are called to lead, protect, and serve...", topic: "Men" },
      { title: "Faith Under Fire", content: "Trials refine our faith and show God's glory.", topic: "Faith" },
      { title: "Cultural Decline", content: "We must stand against moral compromise.", topic: "Culture" },
      { title: "Armor of God", content: "The full armor is vital for daily spiritual battle.", topic: "Spiritual" },
      { title: "Daily Reflection", content: "What did I do today that honored Christ?", topic: "Reflection" },
    ];

    function renderPosts(filter = null) {
      const grid = document.getElementById('postGrid');
      grid.innerHTML = '';
      const list = filter ? posts.filter(p => p.topic === filter) : posts;
      list.forEach(post => {
        const el = document.createElement('div');
        el.className = 'card';
        el.dataset.topic = post.topic;
        el.innerText = post.title;
        el.onclick = () => {
          modalText.textContent = post.content;
          modal.style.display = 'flex';
        };
        grid.appendChild(el);
      });
    }

    renderPosts();

    document.querySelectorAll('.filters button[data-topic]').forEach(btn => {
      btn.onclick = () => {
        renderPosts(btn.dataset.topic);
        groupToggle.textContent = "Show Original Order";
        groupToggle.disabled = true;
      };
    });

    groupToggle.onclick = () => {
      if (!showingGroup) {
        posts.sort((a, b) => a.topic.localeCompare(b.topic));
        groupToggle.textContent = "Show Original Order";
        showingGroup = true;
      } else {
        groupToggle.textContent = "Group by Topic";
        showingGroup = false;
      }
      groupToggle.disabled = false;
      renderPosts();
    };

    closeModal.onclick = () => modal.style.display = 'none';

    function speakContent() {
      const msg = new SpeechSynthesisUtterance(modalText.textContent);
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(msg);
    }

    const saved = localStorage.getItem('theme') || 'dark';
    body.classList.remove('light','dark');
    body.classList.add(saved);
    toggle.addEventListener('click', () => {
      const next = body.classList.contains('dark') ? 'light' : 'dark';
      body.classList.remove('dark','light');
      body.classList.add(next);
      localStorage.setItem('theme', next);
    });
  </script>
</body>
</html>
